import{W as b,V as T,N as k,f as x,l as q,v as c,b3 as W}from"./index-AM_KDpRB.js";const G={config:{supports_line_thickness:!0},render(o){const{state:e,imev:n,frame:i}=o,p=e.modes.remote_draw;n.mouse.pos!=null?p.mouse_pos=b(i,n.mouse.pos):p.mouse_pos=void 0,n.mouse.action={cursor:"default",callback:(D,l)=>{let _=[],a=null,m=Date.now();function M(s){if(s.length===0)return;const t=W(e,s);if(e.tappy.buffer_len_us>0&&e.tappy.buffer_len_us<200*1e3){const u=Date.now()-m;t.unshift({on_duration_us:0,off_duration_us:u*1e3,idx:"none"})}e.tappy.add(t),m=Date.now()}function d(s){const t=b(i,s),u=k(e);a??=t;const h=Math.max(1,Math.ceil(c.distance(a,t)/10)),w=[];for(let f=1;f<=h;f++){const y=f/h,C=c.add(c.mul(c.sub(t,a),[y,y]),a),g=x(u,q[e.settings.line_thickness],C),v=[];for(const r of g)_.includes(r)||v.push(r);_=g;for(const r of v)w.push(r)}M(w),a=t}return e.play=!1,l.setstate(),e.play=!0,e.repeat=!0,l.setstate(),d(D),{onmove(s){d(s)},onrelease(s){d(s),(async()=>{await e.tappy.wait_buffer_empty,e.play&&(e.play=!1,e.repeat=!1,l.setstate())})().catch(T)}}}}},previewer(o){const e=o.modes.remote_draw,n=k(o);return e.mouse_pos==null?[]:x(n,q[o.settings.line_thickness],e.mouse_pos)},sequencer:function*(o,e){}};export{G as default};
